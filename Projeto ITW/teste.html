<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>ITW 2022/23 - Countries edition Details</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Open+Sans&display=swap">
    <link href="../lib/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="../lib/font-awesome/dist/css/font-awesome.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="myCSS.css" />
</head>

<body>
    <!-- Work Area-->
<div id="pie" style="width: 900px; height: 500px;"></div>
    <script src="../lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../lib/knockout/dist/knockout-latest.min.js"></script>
    <script src="../lib/jquery/dist/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
        google.charts.load('current', { 'packages': ['corechart'] });

        var Counter1 = [];
        var Medalhas = [];

        $.ajax({
            type: 'GET',
            url: 'http://192.168.160.58/Olympics/api/Games/FullDetails?id=3',
            headers: {
                'Content-Type': 'application/json'
            },
            success: function (data, status, xhr) {

                Medalhas.push((data.Medals).map(({ MedalName }) => MedalName));
                Counter1.push((data.Medals).map(({ Counter }) => Counter));
                google.charts.setOnLoadCallback(drawChart);


            }
        });
        const ola1 = Counter1[0].map(parseInt);
        const ola2 = Counter1[1].map(parseInt);
        const ola3 = Counter1[2].map(parseInt);

        console.log(Medalhas)
        console.log(Counter1)

        function drawChart(Counter1, Medalhas) {
            var data = new google.visualization.DataTable();
            console.log(Counter1);
            data.addColumn('string', 'Medalha');
            data.addColumn('number', 'Quantidade');
            data.addRows([
                [Medalhas[0], ola1],
                [Medalhas[1], ola2],
                [Medalhas[2], ola3]
            ]);
            var options = {
                title: 'My Daily Activities'
            };
            var chart = new google.visualization.PieChart(document.getElementById('pie'));
            chart.draw(data, options);
        }
    </script>
</body>